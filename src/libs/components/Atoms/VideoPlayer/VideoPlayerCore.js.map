{"version":3,"sources":["../../../../src/components/Atoms/VideoPlayer/VideoPlayerCore.tsx"],"names":["React","useCallback","useEffect","useRef","useState","useInView","SkeletonBlockItem","StyledVideoPlayer","StyledVideoWrapper","VideoPlayerCore","title","videoId","width","height","url","pip","controls","light","loop","loading","playbackRate","playing","volume","muted","allowfullscreen","rounded","stopOnUnmount","maxHeight","onStart","onPause","onPlay","onError","onEnded","onProgress","onDuration","children","props","containerRef","videoViewer","setVideoViewer","threshold","ref","inView","loaded","setLoaded","id","_onStart","cb","_onEnded","event","_onPlay","_onDuration","_onPause","_onProgress","state","_onError","document","fullscreenElement","canPlayType","undefined","stop"],"mappings":"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","sourcesContent":["import React, {\n  MutableRefObject,\n  ReactElement,\n  Ref,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport { useInView } from 'react-intersection-observer'\nimport { SkeletonBlockItem, SkeletonInlineItem } from '@/components/Atoms/Skeleton'\nimport {\n  VideoPlayerProps,\n  VideoPlayerViewer,\n} from '@/components/Atoms/VideoPlayer/VideoPlayer.interface'\nimport {\n  StyledVideoPlayer,\n  StyledVideoWrapper,\n} from '@/components/Atoms/VideoPlayer/VideoPlayer.styled'\n\nexport const VideoPlayerCore: React.FC<VideoPlayerProps> = ({\n  title = 'core video player',\n  videoId = 'player-core',\n  width = '100%',\n  height = '100%',\n  url,\n  pip = false,\n  controls = true,\n  light = false,\n  loop = false,\n  loading,\n  playbackRate = 1,\n  playing,\n  volume = 0.6,\n  muted = false,\n  allowfullscreen = false,\n  rounded = false,\n  stopOnUnmount = true,\n  maxHeight,\n  onStart,\n  onPause,\n  onPlay,\n  onError,\n  onEnded,\n  onProgress,\n  onDuration,\n  children,\n  ...props\n}) => {\n  if (loading) {\n    return <SkeletonBlockItem height=\"350px\" />\n  }\n\n  const containerRef = useRef<HTMLDivElement>(null)\n  const [videoViewer, setVideoViewer] = useState<VideoPlayerViewer | null>(null)\n  const [ref, inView] = useInView({\n    threshold: 0.3,\n  })\n\n  const [loaded, setLoaded] = useState(false)\n\n  const id = `video-player-container-${videoId}`\n\n  const _onStart = useCallback(cb => onStart?.(cb), [])\n\n  const _onEnded = useCallback(event => onEnded?.(event), [])\n\n  const _onPlay = useCallback(event => onPlay?.(event), [])\n\n  const _onDuration = useCallback(event => onDuration?.(event), [])\n\n  const _onPause = useCallback(event => onPause?.(event), [])\n\n  const _onProgress = useCallback(state => {\n    onProgress?.(state)\n  }, [])\n\n  const _onError = useCallback(event => onError?.(event), [])\n\n  useEffect(() => {\n    videoViewer?.onStart(() => {\n      if (!loaded) {\n        setLoaded(true)\n      }\n    })\n  }, [videoViewer])\n\n  useEffect(() => {\n    if (\n      document.fullscreenElement !== null &&\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      (document.fullscreenElement === true ||\n        (document.fullscreenElement as HTMLVideoElement)?.canPlayType !== undefined)\n    ) {\n      return\n    }\n    if (loaded && !inView) {\n      videoViewer?.stop()\n    }\n  }, [inView])\n\n  return (\n    <StyledVideoWrapper aspect=\"16/9\" ref={containerRef}>\n      <StyledVideoPlayer\n        id={id}\n        width={width}\n        ref={videoViewer}\n        height={height}\n        url={url}\n        pip={pip}\n        playing={playing}\n        controls={controls}\n        rounded={rounded ?? undefined}\n        light={light}\n        loop={loop}\n        playbackRate={playbackRate}\n        volume={volume}\n        muted={muted}\n        onStart={_onStart}\n        onPlay={_onPlay}\n        onPause={_onPause}\n        onProgress={_onProgress}\n        onError={_onError}\n        onDuration={_onDuration}\n      />\n      <div id={id} ref={ref} />\n    </StyledVideoWrapper>\n  )\n}\n"],"file":"VideoPlayerCore.js"}