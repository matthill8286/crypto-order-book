{"version":3,"sources":["../../../../src/components/Molecules/BackToTop/withBackToTop.tsx"],"names":["React","Component","subscribe","withBackToTop","WrappedComponent","scrollDirection","backToTop","event","augmentedEvent","scroll","delta","state","top","setState","handleBackToTop","scrollPositionY","clearTimeout","handleTimeout","setTimeout","subscribers","handleScroll","bind","useRAF","enableScrollInfo","forEach","subscriber","unsubscribe","props"],"mappings":"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","sourcesContent":["import React, { Component, MouseEvent } from 'react'\nimport { subscribe } from 'subscribe-ui-event'\n\ntype Props = {\n  visible?: 'VISIBLE' | 'TRANSPARENT' | 'HIDDEN'\n  onClick?: (e: MouseEvent<Element, MouseEvent>) => void\n  onMouseOver?: (e: MouseEvent<Element, MouseEvent>) => void\n}\n\ntype InnerProps = {\n  visible?: 'VISIBLE' | 'TRANSPARENT' | 'HIDDEN'\n  onClick?: (e: MouseEvent<Element, MouseEvent>) => void\n  onMouseOver?: (e: MouseEvent<Element, MouseEvent>) => void\n}\n\ntype InnerState = {\n  scrollDirection: 'NONE' | 'UP' | 'DOWN'\n  backToTop: 'VISIBLE' | 'TRANSPARENT' | 'HIDDEN'\n}\n\nexport const withBackToTop = (WrappedComponent: React.FC<Props>) => {\n  return class extends Component<InnerProps, InnerState> {\n    handleTimeout?: any | undefined\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    subscribers: any[] = []\n\n    state: Readonly<InnerState> = {\n      scrollDirection: 'NONE',\n      backToTop: 'HIDDEN',\n    }\n\n    handleScroll(event: unknown, augmentedEvent: { scroll: { delta: number; top: number } }) {\n      if (\n        augmentedEvent.scroll.delta > 0 &&\n        this.state.scrollDirection !== 'DOWN' &&\n        augmentedEvent.scroll.top > 0\n      ) {\n        this.setState({ scrollDirection: 'DOWN' })\n      } else if (augmentedEvent.scroll.delta < 0 && this.state.scrollDirection !== 'UP') {\n        this.setState({ scrollDirection: 'UP' })\n      }\n      this.handleBackToTop(augmentedEvent.scroll.top)\n    }\n\n    handleBackToTop(scrollPositionY: number) {\n      clearTimeout(this.handleTimeout)\n      if (this.state.scrollDirection === 'DOWN' && scrollPositionY > 300) {\n        this.setState({ backToTop: 'VISIBLE' })\n\n        this.handleTimeout = setTimeout(() => {\n          this.setState({ backToTop: 'TRANSPARENT' })\n        }, 6000)\n      } else if (this.state.scrollDirection === 'UP') {\n        this.handleTimeout = setTimeout(() => {\n          this.setState({ backToTop: 'TRANSPARENT' })\n          this.setState({ backToTop: 'HIDDEN' })\n        }, 1000)\n      }\n    }\n\n    componentDidMount() {\n      this.subscribers = [\n        subscribe('scroll', this.handleScroll.bind(this), {\n          useRAF: true,\n          enableScrollInfo: true,\n        }),\n      ]\n    }\n\n    componentWillUnmount() {\n      this.subscribers.forEach(subscriber => subscriber.unsubscribe())\n      clearTimeout(this.handleTimeout)\n    }\n\n    render() {\n      return (\n        <WrappedComponent\n          visible={this.state.backToTop}\n          onMouseOver={() => clearTimeout(this.handleTimeout)}\n          {...this.props}\n        />\n      )\n    }\n  }\n}\n"],"file":"withBackToTop.js"}